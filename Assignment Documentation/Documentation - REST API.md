
# Documentation - REST API
Git Repository URL : https://github.com/Alek-beep/AssignmentPhase2
# Routes in the application
The angular front end communicates with the back-end node.js server using routes. The system utilizes the RESTful system. Firstly it separates the concerns of the user interface from the data storage which is all done on the backend node.js server using the ability of javascript to read in from and write to a mongoDB database made up of two collections, users and groups. Mongo functions are called which allow for interaction between this NoSQL database. This makes the processing of the data much easier, and also keeps it away from the user interface elements. The system is also stateless. Each request from the front end to the back end contains all of the information necessary for the request.
# /api/getlist
Thie /api/getList route simply returns the list of all users in the users collection of the database. This route is used for testing purposes. It takes no parameters and simply calls the collection.find({}) function to return all the items of a collection.
# /api/getlistGroups
Thie /api/getList route simply returns the list of all groups in the groups collection of the database. This route is used for testing purposes. It takes no parameters and simply calls the collection.find({}) function to return all the items of a collection.
# /api/chat
The/api/chat route takes in the user name of the currently logged in user as a parameter. This is then used to find the channel to put the user in when the chat functionality is called. The groups collection is searched and when the channel is found that contains the user, the socket is initiated. Then the chat component is loaded.
# /api/auth
The /api/auth route takes in the entered username and email on the user interface from the login form. It then checks if the request body contains data. The users collection is searched, and if a user is found, the password is checked and if it is correct the user is allowed to log in.
# /api/add
The /api/add route is used for adding a user to the system by storing it in the users collection of the mongodb database. The route takes in a user object as a parameter. It then checks if the request body contains data. The users collection is checked against the user id of the incoming user object and if there is no duplicate the user is inserted into the collection using insertOne(). The appropriate JSON return values are then passed onwards for error validation.
# /api/remove_user
This route takes in a username from the front-end in the request body parameter. The users collection is then searched for a user with a matching name. If the count of the users with this name is greater than one, then a single entry for that user name is deleted from the collection using the deleteOne function.
# /api/add_group
The /api/add route is used for adding a gropu to the system by storing it in the groups collection of the mongodb database. The route takes in a group object as a parameter. It then checks if the request body contains data. The group collection is checked against the group name  of the incoming user object and if there is no duplicate the group is inserted into the collection using insertOne(). The appropriate JSON return values are then passed onwards for error validation.
# /api/remove_group
This route takes in a group from the front-end in the request body parameter. The groups collection is then searched for a group with a matching name. If the count of the groups with this name is greater than one, then a single entry for that user name is deleted from the collection using the deleteOne function.
# /api/remove_user_from_group
This route is for removing a single user from a group. It takes in as parameters from the front-end the group name and the user to remove via the request body. It then checks if the request body contains data. The users collection is searched to check for a matching user. Then the groups collection is searched using the groupName input parameter. The users list is searched for the returned group from this search and if there is a user in this list matching the input user, then the user is removed from the users list array. After the user is removed from this list, then the users list of the group is updated with this new information.
# /api/remove_channel_from_group
This route is for removing a single channel from a group. It takes in as parameters from the front-end the group name and the channel to remove via the request body. It then checks if the request body contains data. Then the groups collection is searched using the groupName input parameter. The channels list is searched for the returned group from this search and if there is a channel in this list matching the input channel, then the channel is removed from the channels list array. After the channel is removed from this list, then the channels list of the group is updated with this new information.
# /api/add_user_to_group
This route is for adding a single user from a group. It takes in as parameters from the front-end the group name and the user to remove via the request body. It then checks if the request body contains data. The users collection is searched to check for a matching user. Then the groups collection is searched using the groupName input parameter. The users list is returned and the new used is pushed to it. After the users list is appended to, the users list of the group is updated with this new information.
# /api/add_channel_to_group
This route is for adding a single channel to a group. The channel name, and the group name of the new channel and existing group is passed as input parameters. The group is found with the correct name and then the channels list is pulled out. The new channel object is appended to this array and then the original group channel list is updated with this new channel list.
